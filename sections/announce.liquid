{% comment %} Essential Starr Announcement Banner Section {% endcomment %}

<style>
  .es-announcement-banner {
    position: relative;
    width: 100%;
    background: linear-gradient(135deg, #a78bfa 0%, #c4b5fd 100%);
    border-bottom: 1px solid rgba(167, 139, 250, 0.3);
    font-family: {{ settings.type_body_font | font_family }};
    overflow: hidden;
    transition: all 0.5s ease;
    box-shadow: 0 2px 10px rgba(139, 92, 246, 0.2);
  }

  .es-announcement-banner::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.15'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    opacity: 0.3;
  }

  .es-banner-collapsed {
    padding: 8px 16px;
    text-align: center;
    cursor: pointer;
    position: relative;
    z-index: 1;
  }

  .es-banner-text {
    display: inline-block;
    color: #ffffff;
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 0.3px;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
  }

  .es-banner-highlight {
    color: #ffffff;
    font-weight: 700;
    text-decoration: underline;
    text-decoration-color: rgba(255, 255, 255, 0.6);
    text-underline-offset: 3px;
  }

  .es-expand-btn {
    display: inline-block;
    margin-left: 12px;
    padding: 4px 12px;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid #ffffff;
    border-radius: 20px;
    color: #7c3aed;
    font-size: 11px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
  }

  .es-expand-btn:hover {
    background: #ffffff;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  }

  .es-banner-expanded {
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    transition: max-height 0.4s ease-out, opacity 0.3s ease-out, padding 0.3s ease-out;
    background: linear-gradient(135deg, #faf5ff 0%, #ffffff 100%);
    position: relative;
    z-index: 1;
    padding: 0 20px;
  }

  .es-banner-expanded.show {
    max-height: 1000px;
    opacity: 1;
    padding: 40px 20px;
  }

  .es-letter-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 30px;
    background: white;
    border-radius: 16px;
    box-shadow: 0 8px 32px rgba(139, 92, 246, 0.15);
  }

  .es-letter-header {
    text-align: center;
    margin-bottom: 30px;
    padding-bottom: 25px;
    border-bottom: 3px solid #e9d5ff;
  }

  .es-letter-title {
    color: #7c3aed;
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 12px;
    line-height: 1.4;
  }

  .es-letter-subtitle {
    color: #a78bfa;
    font-size: 18px;
    font-style: italic;
    font-weight: 500;
  }

  .es-letter-body {
    color: #374151;
    font-size: 16px;
    line-height: 1.8;
  }

  .es-letter-greeting {
    color: #7c3aed;
    font-weight: 600;
    margin-bottom: 20px;
    font-size: 17px;
  }

  .es-letter-paragraph {
    margin-bottom: 20px;
    text-align: left;
  }

  .es-letter-signature {
    margin-top: 35px;
    padding-top: 25px;
    border-top: 2px solid #e9d5ff;
  }

  .es-signature-name {
    color: #7c3aed;
    font-weight: 700;
    margin-bottom: 5px;
  }

  .es-signature-title {
    color: #a78bfa;
    font-size: 15px;
    margin-bottom: 10px;
  }

  .es-signature-contact {
    color: #7c3aed;
    font-size: 15px;
    margin-top: 10px;
  }

  .es-tagline {
    text-align: center;
    color: #7c3aed;
    font-style: italic;
    font-size: 16px;
    margin-top: 25px;
    padding: 20px;
    background: linear-gradient(135deg, #f3e8ff 0%, #faf5ff 100%);
    border-radius: 12px;
    border: 2px solid #e9d5ff;
  }

  .es-close-btn {
    position: absolute;
    top: 20px;
    right: 25px;
    background: #7c3aed;
    color: white;
    border: none;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    font-size: 22px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 10;
    box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
  }

  .es-close-btn:hover {
    background: #6b21a8;
    transform: rotate(90deg) scale(1.1);
  }

  @media (max-width: 768px) {
    .es-banner-collapsed {
      padding: 6px 12px;
    }

    .es-banner-text {
      font-size: 11px;
    }

    .es-expand-btn {
      display: block;
      margin: 8px auto 0;
      padding: 3px 10px;
      font-size: 10px;
      width: fit-content;
    }

    .es-letter-title {
      font-size: 22px;
    }

    .es-letter-subtitle {
      font-size: 15px;
    }

    .es-letter-body {
      font-size: 15px;
    }

    .es-letter-container {
      padding: 20px 15px;
    }

    .es-banner-expanded.show {
      padding: 30px 15px;
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .es-banner-expanded.show .es-letter-container {
    animation: fadeIn 0.6s ease forwards;
  }
</style>

<div class="es-announcement-banner" id="esAnnouncementBanner">
  <div class="es-banner-collapsed" id="esBannerCollapsed">
    <span class="es-banner-text">
      âœ¨ {{ section.settings.collapsed_text }}
      <span class="es-banner-highlight">{{ section.settings.highlight_text }}</span> ðŸŒ¿
    </span>
    <button class="es-expand-btn" onclick="expandESBanner()">{{ section.settings.button_text }}</button>
  </div>

  <div class="es-banner-expanded" id="esBannerExpanded">
    <button class="es-close-btn" onclick="collapseESBanner()" aria-label="Close">Ã—</button>

    <div class="es-letter-container">
      <div class="es-letter-header">
        <h2 class="es-letter-title">{{ section.settings.letter_title }}</h2>
        <p class="es-letter-subtitle">{{ section.settings.letter_subtitle }}</p>
      </div>

      <div class="es-letter-body">
        <p class="es-letter-greeting">Dear Friends and Valued Customers of Essential Starr,</p>

        <p class="es-letter-paragraph">
          We are delighted to share some exciting news! Effective October 21, 2025, the Essential Starr product line â€” including our beloved blends and essential oils â€” is joining forces with Lavender Hill Botanicals, part of Windy Hill Farms, owned by the wonderful Chris and Katie Miller family in the beautiful Amish countryside of Pennsylvania.
        </p>

        <p class="es-letter-paragraph">
          After 30 years of creating, formulating, teaching, and sharing the gifts of nature through Essential Starr, it brings me great joy to see these products continue to blossom in such loving and capable hands. When I met Katie earlier this year and visited her stunning 80-acre lavender farm, I was immediately touched by her passion, her craftsmanship, and her beautifully curated farm shop filled with lavender treasures.
        </p>

        <p class="es-letter-paragraph">
          As we spoke, it became clear that our visions were aligned â€” to share the healing power and joy of essential oils with integrity, purity, and heart. Together, we saw how Lavender Hill Botanicals could expand to include many of the signature blends you've come to love from Essential Starr, alongside Katie's exquisite lavender creations.
        </p>

        <p class="es-letter-paragraph">
          This transition feels perfectly timed â€” arriving with the season of harvest and light, coinciding with Diwali, the Indian Festival of Lights. It's a beautiful symbol of illumination and new beginnings, which has always been at the heart of my work with essential oils.
        </p>

        <p class="es-letter-paragraph">
          Please know that I'm not going away. I will continue to collaborate with Katie during this transition, ensuring that our formulas maintain their quality, integrity, and energetic signature. I will also remain available for essential oil consultations and guidance, continuing to share my 30+ years of aromatic and herbal experience.
        </p>

        <p class="es-letter-paragraph">
          The Essential Starr 5ml essential oils will still carry the familiar label, while the blended products will now appear under Lavender Hill Botanicals â€” the perfect evolution of our shared vision for natural beauty and holistic wellness.
        </p>

        <p class="es-letter-paragraph">
          Thank you, dear friends, for your years of loyalty, inspiration, and trust. We look forward to seeing you continue your aromatic journey with Lavender Hill Botanicals â€” where the legacy of Essential Starr will shine on in new light.
        </p>

        <div class="es-letter-signature">
          <p class="es-signature-name">With warmth and gratitude,</p>
          <p class="es-signature-name">Patricia Starr, LMT, RA, SET, SCI</p>
          <p class="es-signature-title">Founder, Essential Starr</p>
          <p class="es-signature-contact">ðŸ“± 941-735-9266</p>
        </div>

        <div class="es-tagline">
          "Where the Essence of Nature Continues to Bloom"<br>
          â€” Lavender Hill Botanicals & Essential Starr Partnership
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function expandESBanner() {
    const expanded = document.getElementById('esBannerExpanded');
    const collapsed = document.getElementById('esBannerCollapsed');

    collapsed.style.opacity = '0';
    collapsed.style.transition = 'opacity 0.2s ease-out';

    setTimeout(() => {
      collapsed.style.display = 'none';
      expanded.classList.add('show');
    }, 200);

    localStorage.setItem('esbannerExpanded', 'true');

    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  }

  function collapseESBanner() {
    const expanded = document.getElementById('esBannerExpanded');
    const collapsed = document.getElementById('esBannerCollapsed');

    expanded.classList.remove('show');

    // Wait for collapse animation to finish before showing collapsed bar
    setTimeout(() => {
      collapsed.style.display = 'block';
      collapsed.style.opacity = '0';
      // Trigger reflow for smooth fade-in
      collapsed.offsetHeight;
      collapsed.style.opacity = '1';
    }, 400);

    localStorage.setItem('esbannerExpanded', 'false');
  }

  document.addEventListener('DOMContentLoaded', function() {
    const isExpanded = localStorage.getItem('esbannerExpanded') === 'true';
    const collapsed = document.getElementById('esBannerCollapsed');

    // Set up transition for collapsed bar
    collapsed.style.transition = 'opacity 0.2s ease-out';

    if (isExpanded) {
      expandESBanner();
    }
  });
</script>

{% schema %}
{
  "name": "Essential Starr Banner",
  "settings": [
    {
      "type": "text",
      "id": "collapsed_text",
      "label": "Banner Text",
      "default": "Awesome Announcement!"
    },
    {
      "type": "text",
      "id": "highlight_text",
      "label": "Highlight Text",
      "default": "Essential Starr joins Lavender Hill Botanicals"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Read the Full Story â†’"
    },
    {
      "type": "text",
      "id": "letter_title",
      "label": "Letter Title",
      "default": "âœ¨ Essential Starr Transitions to Lavender Hill Botanicals"
    },
    {
      "type": "text",
      "id": "letter_subtitle",
      "label": "Letter Subtitle",
      "default": "Continuing the Legacy of Light, Love, and Botanical Beauty"
    }
  ],
  "presets": [
    {
      "name": "Essential Starr Banner"
    }
  ]
}
{% endschema %}
